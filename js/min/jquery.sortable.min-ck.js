!function(t){var e,a=t();t.fn.sortable=function(n){var r=String(n);return n=t.extend({connectWith:!1},n),this.each(function(){if(/^enable|disable|destroy$/.test(r)){var i=t(this).children(t(this).data("items")).attr("draggable","enable"==r);return void("destroy"==r&&i.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"))}var s,d,i=t(this).children(n.items),o=t("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');i.find(n.handle).mousedown(function(){s=!0}).mouseup(function(){s=!1}),t(this).data("items",n.items),a=a.add(o),n.connectWith&&t(n.connectWith).add(this).data("connectWith",n.connectWith),i.attr("draggable","true").on("dragstart.h5s",function(a){if(n.handle&&!s)return!1;s=!1;var r=a.originalEvent.dataTransfer;r.effectAllowed="move",r.setData("Text","dummy"),d=(e=t(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){e.removeClass("sortable-dragging").show(),a.detach(),d!=e.index()&&i.parent().trigger("sortupdate",{item:e}),e=null}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,o]).on("dragover.h5s dragenter.h5s drop.h5s",function(r){return i.is(e)||n.connectWith===t(e).parent().data("connectWith")?"drop"==r.type?(r.stopPropagation(),a.filter(":visible").after(e),!1):(r.preventDefault(),r.originalEvent.dataTransfer.dropEffect="move",i.is(this)?(n.forcePlaceholderSize&&o.height(e.outerHeight()),e.hide(),t(this)[o.index()<t(this).index()?"after":"before"](o),a.not(o).detach()):!a.is(this)&&!t(this).children(n.items).length&&(a.detach(),t(this).append(o)),!1):!0})})}}(jQuery);